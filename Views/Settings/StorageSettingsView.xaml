<UserControl
  x:Class="Moodex.Views.Settings.StorageSettingsView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:vm="clr-namespace:Moodex.ViewModels.Settings">

    <StackPanel Margin="10" VerticalAlignment="Top">
        <TextBlock Text="Storage" FontWeight="Bold" Margin="0,0,0,8"/>

        <!-- Which library is primary -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="Primary Library:" Width="120" VerticalAlignment="Center"/>
            <ComboBox Width="150"
                      ItemsSource="{Binding Libraries}"
                      SelectedItem="{Binding PrimaryLibrary}" />
        </StackPanel>

        <!-- Active (fast) library -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="Active Path:" Width="120" VerticalAlignment="Center"/>
            <TextBox Text="{Binding ActiveLibraryPath, UpdateSourceTrigger=PropertyChanged}"
                     Width="300"/>
        </StackPanel>

        <!-- Archive (cold) library -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
            <TextBlock Text="Archive Path:" Width="120" VerticalAlignment="Center"/>
            <TextBox Text="{Binding ArchiveLibraryPath, UpdateSourceTrigger=PropertyChanged}"
                     Width="300"/>
        </StackPanel>

        <!-- 7zip section -->
        <TextBlock Text="7zip" FontWeight="Bold" Margin="0,0,0,5"/>
        <TextBlock Text="7zip is required for compressing games when archiving to save storage space."
            FontSize="10"
            Margin="0,0,0,5"/>
        <TextBlock Text="Download 7zip from the official website: "
            FontSize="10"
            Margin="0,0,0,5">
            <Hyperlink NavigateUri="https://www.7-zip.org/download.html" RequestNavigate="Hyperlink_RequestNavigate">
                https://www.7-zip.org/download.html
            </Hyperlink>
        </TextBlock>
        
        <!-- 7zip path selection -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="7zip Path:" Width="120" VerticalAlignment="Center"/>
            <TextBox Text="{Binding SevenZipPath, UpdateSourceTrigger=PropertyChanged}"
                     Width="300" Margin="0,0,5,0"/>
            <Button Content="Browse..." Command="{Binding BrowseFor7zipCommand}" Width="80"/>
        </StackPanel>
        
        <!-- Status indicator -->
        <TextBlock Text="7zip is configured and ready to use."
            FontStyle="Italic"
            FontSize="10"
            Margin="0,5,0,5"
            Foreground="Green">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Is7zipConfigured}" Value="True">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
        
        <!-- Compress on archive checkbox -->
        <CheckBox Content="Compress to zip on archive"
                  IsChecked="{Binding CompressOnArchive}"
                  Margin="0,5,0,5">
            <CheckBox.Style>
                <Style TargetType="CheckBox">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Is7zipConfigured}" Value="True">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </CheckBox.Style>
        </CheckBox>
    </StackPanel>
</UserControl>

